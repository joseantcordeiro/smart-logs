# SMEDREC Audit Server Environment Configuration
# Copy this file to .env and update with your actual values

# =============================================================================
# SERVER CONFIGURATION
# =============================================================================

# Environment mode (development, staging, production)
NODE_ENV=development

# Server host and port
HOST=0.0.0.0
PORT=3000

# =============================================================================
# DATABASE CONFIGURATION
# =============================================================================

# PostgreSQL connection string
# Format: postgresql://username:password@host:port/database
DATABASE_URL=postgresql://audit_user:audit_password@localhost:5432/audit_db

# Database connection pool settings
DB_POOL_SIZE=10
DB_CONNECTION_TIMEOUT=30000
DB_IDLE_TIMEOUT=600000

# =============================================================================
# REDIS CONFIGURATION
# =============================================================================

# Redis connection string
# Format: redis://[username:password@]host:port[/database]
REDIS_URL=redis://localhost:6379

# Redis connection settings
REDIS_MAX_RETRIES=3
REDIS_RETRY_DELAY=100

# =============================================================================
# AUTHENTICATION CONFIGURATION
# =============================================================================

# Strong secret key for authentication (generate with: openssl rand -base64 32)
AUTH_SECRET=your-super-secret-auth-key-change-this-in-production

# Session configuration
SESSION_MAX_AGE=86400000
TRUSTED_ORIGINS=http://localhost:3001,http://localhost:5173

# =============================================================================
# CORS CONFIGURATION
# =============================================================================

# Allowed origins for CORS (comma-separated)
CORS_ORIGIN=http://localhost:3001,http://localhost:5173,https://app.smedrec.com

# Allowed methods for CORS
CORS_METHODS=GET,POST,PUT,DELETE,OPTIONS,PATCH

# Allowed headers for CORS
CORS_HEADERS=Content-Type,Authorization,X-Requested-With,Accept,Origin

# Allow credentials in CORS requests
CORS_CREDENTIALS=true

# =============================================================================
# API CONFIGURATION
# =============================================================================

# Enable/disable API endpoints
ENABLE_TRPC=true
ENABLE_REST=true
ENABLE_GRAPHQL=true

# API paths
TRPC_PATH=/trpc
REST_PATH=/api
GRAPHQL_PATH=/graphql

# API rate limiting
RATE_LIMIT_WINDOW_MS=60000
RATE_LIMIT_MAX_REQUESTS=100

# =============================================================================
# MONITORING CONFIGURATION
# =============================================================================

# Logging level (debug, info, warn, error)
LOG_LEVEL=info

# Health check endpoint path
HEALTH_CHECK_PATH=/health

# Enable metrics collection
ENABLE_METRICS=true
METRICS_PATH=/metrics

# =============================================================================
# SECURITY CONFIGURATION
# =============================================================================

# JWT configuration
JWT_SECRET=your-jwt-secret-key-change-this-in-production
JWT_EXPIRES_IN=24h

# API key for third-party access (optional)
API_KEY=your-api-key-for-third-party-access

# Encryption key for sensitive data
ENCRYPTION_KEY=your-32-character-encryption-key

# =============================================================================
# EMAIL CONFIGURATION (Optional)
# =============================================================================

# SMTP configuration for email notifications
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_SECURE=false
SMTP_USER=your-email@gmail.com
SMTP_PASS=your-app-password

# Email sender information
EMAIL_FROM=noreply@smedrec.com
EMAIL_FROM_NAME=SMEDREC Audit System

# =============================================================================
# EXTERNAL SERVICES (Optional)
# =============================================================================

# AWS configuration (if using AWS services)
AWS_REGION=us-east-1
AWS_ACCESS_KEY_ID=your-aws-access-key
AWS_SECRET_ACCESS_KEY=your-aws-secret-key

# S3 bucket for file storage (optional)
S3_BUCKET=smedrec-audit-files

# =============================================================================
# DEVELOPMENT CONFIGURATION
# =============================================================================

# Enable debug mode (development only)
DEBUG=false

# Enable development endpoints
ENABLE_DEV_ENDPOINTS=true

# Hot reload configuration
WATCH_FILES=true

# =============================================================================
# PRODUCTION CONFIGURATION
# =============================================================================

# Production-specific settings (only used when NODE_ENV=production)

# Force HTTPS in production
FORCE_HTTPS=true

# Secure cookie settings
SECURE_COOKIES=true

# Content Security Policy
CSP_ENABLED=true

# Rate limiting (stricter in production)
PROD_RATE_LIMIT_WINDOW_MS=60000
PROD_RATE_LIMIT_MAX_REQUESTS=50

# =============================================================================
# DOCKER CONFIGURATION
# =============================================================================

# Docker-specific environment variables

# Container timezone
TZ=UTC

# Container user ID (for security)
CONTAINER_UID=1001
CONTAINER_GID=1001

# =============================================================================
# KUBERNETES CONFIGURATION
# =============================================================================

# Kubernetes-specific environment variables

# Pod name and namespace (automatically set by Kubernetes)
# POD_NAME=
# POD_NAMESPACE=
# POD_IP=

# Service discovery
# SERVICE_NAME=audit-server
# SERVICE_PORT=3000

# =============================================================================
# FEATURE FLAGS
# =============================================================================

# Enable/disable specific features
FEATURE_AUDIT_ENCRYPTION=true
FEATURE_COMPLIANCE_REPORTS=true
FEATURE_REAL_TIME_ALERTS=true
FEATURE_GDPR_EXPORT=true
FEATURE_SCHEDULED_REPORTS=true

# =============================================================================
# PERFORMANCE TUNING
# =============================================================================

# Node.js performance settings
NODE_OPTIONS=--max-old-space-size=1024

# Request timeout settings
REQUEST_TIMEOUT=30000
KEEP_ALIVE_TIMEOUT=65000

# Compression settings
ENABLE_COMPRESSION=true
COMPRESSION_LEVEL=6

# =============================================================================
# BACKUP AND ARCHIVAL
# =============================================================================

# Backup configuration
BACKUP_ENABLED=true
BACKUP_SCHEDULE=0 2 * * *
BACKUP_RETENTION_DAYS=30

# Archival configuration
ARCHIVAL_ENABLED=true
ARCHIVAL_AFTER_DAYS=365